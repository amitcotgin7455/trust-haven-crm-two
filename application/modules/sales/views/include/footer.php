<br>
<br>
<br>
<footer class="footer bg-body shadow-lg  position b-0 py-0">
    <div class="container-fluid ">
        <div class="row">
            <div class="col-md-2 justify-content-between">
                <div class="d-flex" id="chatbot-btn-sec">
                    <div class="chatbot__button icons text-center">
                        <!-- <img src="<?php echo base_url(); ?>assets/lead/front_assets/assets/images/chats.png" width="44px"  alt="" style="cursor: pointer;" > -->
                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" width="20" height="20" x="0" y="0" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><path d="M480.052 369.741c49.476-69.417 41.913-164.522-25.665-226.473-30.877-28.305-70.24-45.926-112.761-50.847a15.224 15.224 0 0 0-.833-.958C303.802 53.038 250.658 31 194.988 31 89.049 31 0 109.933 0 211c0 35.435 11.007 69.404 31.916 98.741L2.707 401.447a14.999 14.999 0 0 0 21.09 17.923l88.827-45.167c18.242 7.855 37.586 13.009 57.618 15.354C208.884 430.193 262.315 451 316.98 451c28.416 0 56.729-5.791 82.36-16.798l88.831 45.169a14.973 14.973 0 0 0 6.795 1.629c10.123 0 17.38-9.865 14.295-19.553zm-361.374-25.72a14.997 14.997 0 0 0-13.233.179l-63.267 32.17 20.66-64.866a14.998 14.998 0 0 0-2.473-13.788C40.499 272.286 29.998 242.301 29.998 211c0-82.71 74.014-150 164.99-150 36.636 0 71.905 11.099 100.514 31.086-96.348 9.688-173.51 84.942-173.51 178.914 0 29.228 7.492 57.366 21.617 82.576a173.556 173.556 0 0 1-24.931-9.555zm287.845 60.178a14.998 14.998 0 0 0-13.233-.178C369.905 415.129 343.518 421 316.98 421c-90.976 0-164.99-67.29-164.99-150s74.014-150 164.99-150 164.99 67.29 164.99 150c0 31.301-10.501 61.286-30.368 86.715a15.004 15.004 0 0 0-2.473 13.788l20.66 64.866z" fill="#999999" data-original="#000000" opacity="1" class=""></path><circle cx="255.984" cy="271" r="15" fill="#999999" data-original="#000000" opacity="1" class=""></circle><circle cx="315.981" cy="271" r="15" fill="#999999" data-original="#000000" opacity="1" class=""></circle><circle cx="375.977" cy="271" r="15" fill="#999999" data-original="#000000" opacity="1" class=""></circle></g></svg>
                        <p>chats</p>
                    </div>
                    <div class="chatbot__buttons icons ms-auto text-center">
                        <!-- <img src="<?php echo base_url(); ?>assets/lead/front_assets/assets/images/chats.png" width="44px"  alt="" style="cursor: pointer;" > -->
                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" width="20" height="20" x="0" y="0" viewBox="0 0 512 512.001" style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><path d="M210.352 246.633c33.882 0 63.218-12.153 87.195-36.13 23.969-23.972 36.125-53.304 36.125-87.19 0-33.876-12.152-63.211-36.129-87.192C273.566 12.152 244.23 0 210.352 0c-33.887 0-63.22 12.152-87.192 36.125s-36.129 53.309-36.129 87.188c0 33.886 12.156 63.222 36.13 87.195 23.98 23.969 53.316 36.125 87.19 36.125zM144.379 57.34c18.394-18.395 39.973-27.336 65.973-27.336 25.996 0 47.578 8.941 65.976 27.336 18.395 18.398 27.34 39.98 27.34 65.972 0 26-8.945 47.579-27.34 65.977-18.398 18.399-39.98 27.34-65.976 27.34-25.993 0-47.57-8.945-65.973-27.34-18.399-18.394-27.344-39.976-27.344-65.976 0-25.993 8.945-47.575 27.344-65.973zM426.129 393.703c-.692-9.976-2.09-20.86-4.149-32.351-2.078-11.579-4.753-22.524-7.957-32.528-3.312-10.34-7.808-20.55-13.375-30.336-5.77-10.156-12.55-19-20.16-26.277-7.957-7.613-17.699-13.734-28.965-18.2-11.226-4.44-23.668-6.69-36.976-6.69-5.227 0-10.281 2.144-20.043 8.5a2711.03 2711.03 0 0 1-20.879 13.46c-6.707 4.274-15.793 8.278-27.016 11.903-10.949 3.543-22.066 5.34-33.043 5.34-10.968 0-22.086-1.797-33.043-5.34-11.21-3.622-20.3-7.625-26.996-11.899-7.77-4.965-14.8-9.496-20.898-13.469-9.754-6.355-14.809-8.5-20.035-8.5-13.313 0-25.75 2.254-36.973 6.7-11.258 4.457-21.004 10.578-28.969 18.199-7.609 7.281-14.39 16.12-20.156 26.273-5.558 9.785-10.058 19.992-13.371 30.34-3.2 10.004-5.875 20.945-7.953 32.524-2.063 11.476-3.457 22.363-4.149 32.363C.343 403.492 0 413.668 0 423.949c0 26.727 8.496 48.363 25.25 64.32C41.797 504.017 63.688 512 90.316 512h246.532c26.62 0 48.511-7.984 65.062-23.73 16.758-15.946 25.254-37.59 25.254-64.325-.004-10.316-.351-20.492-1.035-30.242zm-44.906 72.828c-10.934 10.406-25.45 15.465-44.38 15.465H90.317c-18.933 0-33.449-5.059-44.379-15.46-10.722-10.208-15.933-24.141-15.933-42.587 0-9.594.316-19.066.95-28.16.616-8.922 1.878-18.723 3.75-29.137 1.847-10.285 4.198-19.937 6.995-28.675 2.684-8.38 6.344-16.676 10.883-24.668 4.332-7.618 9.316-14.153 14.816-19.418 5.145-4.926 11.63-8.957 19.27-11.98 7.066-2.798 15.008-4.329 23.629-4.56 1.05.56 2.922 1.626 5.953 3.602 6.168 4.02 13.277 8.606 21.137 13.625 8.86 5.649 20.273 10.75 33.91 15.152 13.941 4.508 28.16 6.797 42.273 6.797 14.114 0 28.336-2.289 42.27-6.793 13.648-4.41 25.058-9.507 33.93-15.164 8.043-5.14 14.953-9.593 21.12-13.617 3.032-1.973 4.903-3.043 5.954-3.601 8.625.23 16.566 1.761 23.636 4.558 7.637 3.024 14.122 7.059 19.266 11.98 5.5 5.262 10.484 11.798 14.816 19.423 4.543 7.988 8.208 16.289 10.887 24.66 2.801 8.75 5.156 18.398 7 28.675 1.867 10.434 3.133 20.239 3.75 29.145v.008c.637 9.058.957 18.527.961 28.148-.004 18.45-5.215 32.38-15.937 42.582zm0 0" fill="#999999" data-original="#000000" opacity="1" class=""></path></g></svg>
                        <p>contacts</p>
                    </div>
                </div>               
                <!-- <div>
                    <button type="button" class="btn  position-relative  mx-4 notiy" style="font-size: 12px;">
                        <box-icon name='notification'></box-icon>
                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                            99+
                            <span class="visually-hidden">unread messages</span>
                        </span>
                    </button>
                </div>
                <div>
                    <a href="javascript:void(0)" class="btn reminder-btn  mx-4" id="reminder-btn">
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                    <?php echo $tbl_callback_count ;?>
                    <span class="visually-hidden">unread messages</span>
                    </span>  <box-icon name='alarm' color='#b31942'></box-icon>
                    </a>
                </div> -->
            </div>
        </div>
    </div>
<?php 
/*
    <div class="chatbot">
        <div class="chatbot__header">
            <span class="ths-user">
                A
                <span class="badge bg-success">.</span>
            </span>
            <h3 class="chatbox__title">THSBOT</h3> 
            <div class="userstatus">Available</div>
            <!-- <span>your virtual assistant</span> -->
            <div class="close-btns-chat">
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" width="24" height="24" x="0" y="0" viewBox="0 0 6.35 6.35" style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><path d="M.794 2.91a.265.265 0 0 0 0 .53h4.762a.265.265 0 0 0 0-.53z" fill="#999999" data-original="#000000" class="" opacity="1"></path></g></svg>
            </div>        
        </div>
        <div class="chatbot__search">
            <div class="search_box position-relative">
                <input class="form-control mb-2 search_contacts" type="search" id="gsearch" name="gsearch" placeholder="Search Contact and Chats">
                <svg class="svg-inline--fa fa-magnifying-glass search_icon" type="submit" placeholder="Search" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="magnifying-glass" role="img" xmlns="http://www.w3.org/2000/svg" width="16" height="16" x="0" y="0" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"></path></svg><!-- <i class="search_icon fa-solid fa-magnifying-glass" type="submit" placeholder="Search"></i> Font Awesome fontawesome.com -->
            </div>       
        </div>
        <div class="chat-section">
            <ul class="chatbot__box ps-0">
                <li class="chatbot__chat incoming">   
                        <span class="material-symbols-outlined">
                            <!-- <img src="assets/lead/front_assets/assets/images/user-thumbnail.png" alt="" width="50">  -->
                            <span class="icons-s">A</span>
                            <span class="chat-name">THSBOT</span>
                        </span>                       
                        <div class="chat-in">                           
                            <p>Hi there. How can I help you today?</p>
                        </div>
                        <div class="date-time-sec">
                            <span>4:00PM</span> <span>/</span> <span>20-08-2023</span>
                        </div>
                  </li>
                  <li class="chatbot__chat incoming">   
                       <span class="material-symbols-outlined">
                            <!-- <img src="assets/lead/front_assets/assets/images/user-thumbnail.png" alt="" width="50">  -->
                            <span class="icons-s">A</span>
                            <span class="chat-name">THSBOT</span>
                        </span> 
                        <div class="chat-in">
                           
                            <p>Hi there.</p>
                        </div>
                  </li>
                  <li class="chatbot__chat incoming">   
                        <span class="material-symbols-outlined">
                            <!-- <img src="assets/lead/front_assets/assets/images/user-thumbnail.png" alt="" width="50">  -->
                            <span class="icons-s">A</span>
                            <span class="chat-name">THSBOT</span>
                        </span>  
                        <div class="chat-in">
                       
                            <p><img src="assets/lead/front_assets/assets/images/user-thumbnail.png" alt=""></p>
                            
                        </div>
                  </li>

                  
                  <li class="chatbot__chat outgoing">
                    <div class="material-symbols-inline"><p class="chat-names">THSBOT</p></div>
                    <div class="out-chat">
                       
                        
                        <p>Thanks</p>
                    </div>
                    <div class="date-time-secs">
                            <span>4:00PM</span> <span>/</span> <span>20-08-2023</span>
                    </div>
                </li>
                <li class="chatbot__chat outgoing">
                    <div class="material-symbols-inline"><p class="chat-names">THSBOT</p></div>
                    <div class="out-chat">
                        <p>Thanks for contacting us! We're right here in case you need any help. Feel free to hit us up!</p>
                    </div>
                    <div class="date-time-secs">
                            <span>4:00PM</span> <span>/</span> <span>20-08-2023</span>
                    </div>
                </li>
                <li class="chatbot__chat outgoing">
                    <div class="material-symbols-inline"><p class="chat-names">THSBOT</p></div>
                    <div class="out-chat">
                        <p><img src="assets/lead/front_assets/assets/images/user-thumbnail.png" alt=""></p>
                    </div>
                    <div class="date-time-secs">
                            <span>4:00PM</span> <span>/</span> <span>20-08-2023</span>
                    </div>
                </li>
            </ul>
        </div>
        <div class="chatbot__input-box">
            <div class="input-group">            
              <textarea class="form-control chatbot__textarea" aria-label="With textarea" placeholder="Enter a message..." required></textarea>
                <div class="input-group-prepend">
                    <span class="input-group-texts"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" width="20" height="20" x="0" y="0" viewBox="0 0 32 32" style="enable-background:new 0 0 512 512" xml:space="preserve" fill-rule="evenodd" class=""><g><path d="M16 28a5 5 0 0 1-5-5V6.998A2.999 2.999 0 0 1 13.998 4h.004A2.998 2.998 0 0 1 17 6.998v14.004a.998.998 0 0 1-.998.998H16a1 1 0 0 1-1-1V9a1 1 0 0 0-2 0v12a3 3 0 0 0 3 3h.002A2.998 2.998 0 0 0 19 21.002V6.998A4.998 4.998 0 0 0 14.002 2h-.004A5 5 0 0 0 9 6.998V23a7 7 0 1 0 14 0V9a1 1 0 0 0-2 0v14a5 5 0 0 1-5 5z" fill="#555555" data-original="#000000" opacity="1" class=""></path></g></svg></span>
                    <span id="send-btn" class="input-group-texts"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" width="20" height="20" x="0" y="0" viewBox="0 0 176.368 176.368" style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><path fill-rule="evenodd" d="M175.865 12.489c2.469-7.408-4.578-14.456-11.986-11.987L6.48 52.969c-8.839 2.946-8.565 15.542.393 18.101l76.552 21.873 21.872 76.552c2.56 8.959 15.155 9.233 18.101.393zm-12.34 7.055-49.116 147.348-21.83-76.403zm-6.701-6.701L85.879 83.788 9.477 61.959z" clip-rule="evenodd" fill="#555555" data-original="#000000" opacity="1" class=""></path></g></svg></span>
                </div>
            </div>
            <!-- <textarea class="chatbot__textarea" placeholder="Enter a message..." required ></textarea> 
            <span id="send-btns" class="material-symbols-outlineds"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" width="20" height="20" x="0" y="0" viewBox="0 0 612.675 612.675" style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><path d="M581.209 223.007 269.839 530.92c-51.592 51.024-135.247 51.024-186.839 0-51.592-51.023-51.592-133.737 0-184.761L363.248 69.04c34.402-34.009 90.15-34.009 124.553 0 34.402 34.008 34.402 89.166 0 123.174l-280.249 277.12c-17.19 17.016-45.075 17.016-62.287 0-17.19-16.993-17.19-44.571 0-61.587L394.37 161.42l-31.144-30.793-249.082 246.348c-34.402 34.009-34.402 89.166 0 123.174 34.402 34.009 90.15 34.009 124.552 0l280.249-277.12c51.592-51.023 51.592-133.737 0-184.761-51.593-51.023-135.247-51.023-186.839 0L36.285 330.784l1.072 1.071c-53.736 68.323-49.012 167.091 14.5 229.88 63.512 62.79 163.35 67.492 232.46 14.325l1.072 1.072 326.942-323.31-31.122-30.815z" fill="#cccccc" data-original="#000000" opacity="1" class=""></path></g></svg></span>
            <span id="send-btn" class="material-symbols-outlined"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" width="512" height="512" x="0" y="0" viewBox="0 0 176.368 176.368" style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><path fill-rule="evenodd" d="M175.865 12.489c2.469-7.408-4.578-14.456-11.986-11.987L6.48 52.969c-8.839 2.946-8.565 15.542.393 18.101l76.552 21.873 21.872 76.552c2.56 8.959 15.155 9.233 18.101.393zm-12.34 7.055-49.116 147.348-21.83-76.403zm-6.701-6.701L85.879 83.788 9.477 61.959z" clip-rule="evenodd" fill="#555555" data-original="#000000" opacity="1" class=""></path></g></svg></span> -->
        </div>
    </div>

    <div class="chatbots">
        <div class="chatbot__headers">
            <span class="ths-users">
                A
                <span class="badge bg-success">.</span>
            </span>
            <h3 class="chatbox__titles">THSBOT</h3> 
            <div class="userstatuss">Available</div>
            <!-- <span>your virtual assistant</span> -->
            <div class="close-btns-chats">
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" width="24" height="24" x="0" y="0" viewBox="0 0 6.35 6.35" style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><path d="M.794 2.91a.265.265 0 0 0 0 .53h4.762a.265.265 0 0 0 0-.53z" fill="#999999" data-original="#000000" class="" opacity="1"></path></g></svg>
            </div>        
        </div>
        <div class="chatbot__searchs">
            <div class="search_boxs position-relative">
                <input class="form-control mb-2 search_contactss" type="search" id="gsearch" name="gsearch" placeholder="Search Contact and Chats">
                <svg class="svg-inline--fa fa-magnifying-glass search_icon" type="submit" placeholder="Search" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="magnifying-glass" role="img" xmlns="http://www.w3.org/2000/svg" width="16" height="16" x="0" y="0" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"></path></svg><!-- <i class="search_icon fa-solid fa-magnifying-glass" type="submit" placeholder="Search"></i> Font Awesome fontawesome.com -->
            </div>       
        </div>
        <div class="chat-sections">
            <ul class="chatbot__boxs ps-0">
                <li class="chatbot__chats incomings">   
                        <span class="material-symbols-outlineds">
                            
                            <span class="icons-ss">A</span>
                            <span class="chat-names">THSBOT 
                                <span><img src="assets/lead/front_assets/assets/images/full-stop (1).png" alt="" width="24"></span>
                                <span><img src="assets/lead/front_assets/assets/images/full-stop (2).png" alt="" width="24"></span>
                                <span><img src="assets/lead/front_assets/assets/images/full-stop (3).png" alt="" width="24"></span>
                            </span>
                        </span>                       
                        <div class="chat-ins">                           
                            <p>Hi there. How can I help you today?</p>
                        </div>
                        <div class="dates-time-sec">
                            <span>4:00PM</span> <span>/</span> <span>20-08-2023</span>
                        </div>
                  </li>
                  
            </ul>
        </div>
        
    </div>

<script>
    const chatbotToggle = document.querySelector('.chatbot__button');
    const chatbotCloseBtn = document.querySelector('.chatbot__header .close-btns-chat');
    const sendChatBtn = document.querySelector('.chatbot__input-box span');

    chatbotToggle.addEventListener('click', () =>
    document.body.classList.toggle('show-chatbot')
    );
    chatbotCloseBtn.addEventListener('click', () =>
    document.body.classList.remove('show-chatbot')
    );
    sendChatBtn.addEventListener('click', handleChat);
    
</script>
*/ 
?>

<script>
    // $('.chatbot_contact').click(function(){
    //     $('.chatbots').toggle();
    //     $('.chatbot').hide();
    // })

    // $('.chatbot__button').click(function(){
    //     $('.chatbot').toggle();
    //     $('.chatbots').hide();
    // })
    // const chatbotToggle = document.querySelector('.chatbot__buttons');
    // const chatbotCloseBtn = document.querySelector('.chatbot__headers .close-btns-chats');

    // chatbotToggle.addEventListener('click', () =>
    // document.body.classList.toggle('show-chatbots')
    // );
    // chatbotCloseBtn.addEventListener('click', () =>
    // document.body.classList.remove('show-chatbots')
    // );
    
</script>

    <!-- Reminder Form -->

    <!-- <div class="position-relative">
        <div class="container reminder-show" id="reminder">
            <div class="row">
                <div class="col-md-12">
                    <div class="reminder-btn-modal border ">
                        <div class="top-head d-flex justify-content-between">
                            <div class="right-icon">
                                <box-icon name='alarm' color='#000'></box-icon> <span class="position-relative ">
                                    Reminder
                                    <span
                                        class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-dangers">
                                        <?php echo $tbl_callback_count ;?>
                                        <span class="visually-hidden">unread messages</span>
                                    </span> </span>
                            </div>
                            <div class="left-icon">
                                <span>
                                    <box-icon name="x" id="close-btn"></box-icon>
                                </span>
                            </div>
                        </div>

                        <div class="body-reminder py-3">
                            <span>Now </span> <span class="saprator"></span>
                        </div>
                        <div class="body-main">

                            <?php if(!empty($callback_message)){
                               foreach($callback_message as $row){
                                   $current_date = date("Y-m-d");
                                ?>
                            <?php if($row->lead_callback_date==$current_date ){
                                ?>
                            <div class="user border-bottom">
                                <p class=" fw-bolder cust-n"><?php echo $row->name;?><span
                                        class="float-end reason"><?php echo $row->lead_status;?></span></p>
                                <span class="update-time2"><?php echo $row->lead_status;?>
                                    <?php echo $row->lead_callback_date;?>&nbsp;&nbsp;&nbsp;<?php echo $row->callback_time;?>
                                </span>
                            </div>
                            <?php
                        } ?>

                            <?php
                        }
                        } 
                        ?>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> -->
</footer>
<?php
require_once(FCPATH.'application/views/include/chat.php');
?>
<?php if($user_role=='11'){
  ?>
<div id="frame" class="container-chat ">
<div class=" float-end   " style="cursor: pointer ;" >
        <div class="  mt-3 mx-3 " id="chat-close" width="26" alt="" > <i class="fa fa-close cancel-chat"></i> </div>
</div>
    <div id="sidepanel">
        <div id="profile">
            <div class="wrap">
                <img id="profile-img" src="http://emilcarlsson.se/assets/mikeross.png" class="online" alt="" />
                <p class="mt-2"><?php if(!empty($name)) echo $name;?></p>
                <!-- <i class="fa-solid fa-ellipsis-vertical expand-button text-white dots"></i> -->
                <div id="status-options"></div>
            </div>
        </div>
        <div id="search">
            <label for=""><i class="fa fa-search" aria-hidden="true"></i></label>
            <input type="text" class="search-chat"  placeholder="Search contacts..." />
        </div>
        <div id="contacts">
            <ul class="list-unstyled">
                <?php if(!empty($chatresult)){
                    foreach($chatresult as $chat){
                        ?>

                <li class="contact" id="senduserchat"
                    onclick="adminMessage('<?php echo $chat->id;?>','<?php if(!empty($id)) echo $id;?>')">
                    <div class="wrap">
                        <?php if($chat->login==1){
                            ?>
                            

                            <span class="contact-status online"></span>
                        <?php
                        }
                        else{
                        echo'offline ';
                        }
                        ?>
                        <img src="http://emilcarlsson.se/assets/louislitt.png" alt="" />
                        <div class="meta">
                            <p class="name"><?php echo $chat->name;?></p>
                            <!-- <p class="previews">Username : <?php echo $chat->username;?></p> -->
                        </div>
                    </div>
                </li>
                <?php
                }
              }
              ?>
            </ul>
        </div>

    </div>
    <div class="content">
        <div class="contact-profile">
            <img src="http://emilcarlsson.se/assets/louislitt.png" alt="" />
            <p class="profileuser"></p>
            <!-- <input type="text" value="" id="reciever_id_hidden" class=""> -->
            <!-- <li id="status-online" class="active text-success "> </li> -->
        </div>
        <div class="messages admin-message">
            <ul class="mt-2 sent_message_admin">
                
            </ul>
        </div>
        <div class="message-input">
            <div class="wrap">
                <!-- <span class="reciveid"></span>    -->
                <!-- <input type="text" class="reciveid" name="recieveid">  -->
                <form id="sendMessageUser" method="post">
                    <input name="reciever_id" id="reciever_id" class="reciever_id" type="hidden">
                    <input name="sender_id" id="sender_id" value="<?php echo $id;?>" type="hidden">
                    <input type="text" placeholder="Write your message..." name="send_message_user"
                        id="send_message_user" required />
                    <button class="submit" type="submit"><i class="fa fa-paper-plane" aria-hidden="true"></i></button>
                </form>
            </div>
        </div>
    </div>
</div>
<?php
}
else{
  ?>
<div id="frame" class="container-chat">
<div class=" float-end   " style="cursor: pointer ;" >
        <div class=" mt-3 mx-3 " id="chat-close" width="26" alt="" > <i class="fa fa-close cancel-chat"></i></div>
</div>
    <div id="sidepanel">
        <div id="profile">
            <div class="wrap">
                <img id="profile-img" src="http://emilcarlsson.se/assets/mikeross.png" class="online" alt="" />
                <p class="mt-2"><?php if(!empty($name)) echo $name;?></p>
                <!-- <i class="fa-solid fa-ellipsis-vertical expand-button text-white dots"></i> -->
                <div id="status-options"></div>
            </div>
        </div>
        <div id="search">
            <label for=""><i class="fa fa-search" aria-hidden="true"></i></label>
            <input type="text" class="search-chat" placeholder="Search contacts..." />
        </div>
        <div id="contacts">
            <ul class="list-unstyled">
                <?php if(!empty($chatresult)){
                    foreach($chatresult as $chat){
                        ?>

                <li class="contact" id="senduserchat"
                    onclick="adminMessage(<?php echo $chat->id;?>)">
                    <div class="wrap">
                         <?php if($chat->login==1){
                            ?>
                            

                            <span class="contact-status online"></span>
                        <?php
                        }
                        else{
                        echo'offline ';
                        }
                        ?>
                        <img src="http://emilcarlsson.se/assets/louislitt.png" alt="" />
                        <div class="meta">
                            <p class="name"><?php echo $chat->name;?></p>
                            <!-- <p class="previews">Username : <?php echo $chat->username;?></p> -->
                        </div>
                    </div>
                </li>
                <?php
                }
              }
              ?>
            </ul>
        </div>

    </div>
    <div class="content">
        <div class="contact-profile">
            <img src="http://emilcarlsson.se/assets/louislitt.png" alt="" />
            
            <p class="profileuser"></p>
            <!-- <input type="text" value="" id="reciever_id_hidden" class=""> -->
            <!-- <li id="status-online" class="active text-success "> </li> -->
        </div>
        <div class="messages admin-message">
            <ul class="mt-2 sent_message_admin">
                
            </ul>
        </div>
        <div class="message-input">
            <div class="wrap">
                <!-- <span class="reciveid"></span>    -->
                <!-- <input type="text" class="reciveid" name="recieveid">  -->
                <form id="sendMessageUser" method="post">
                    <input name="sender_id" id="sender_id" type="hidden" value="<?php echo $id;?>">
                    <input name="reciever_id" type="hidden" id="reciever_id" class="reciever_id">
                    <input type="text" placeholder="Write your message..." name="send_message_user"
                        id="send_message_user" required />
                    <button class="submit" type="submit"><i class="fa fa-paper-plane" aria-hidden="true"></i></button>
                </form>
            </div>
        </div>
    </div>
</div>

<?php
}
?>


<!-- toaster bootstrap  -->

<script src="<?php echo base_url(); ?>assets/lead/front_assets/assets/js/jquery.min.js"></script>
<script src="<?php echo base_url(); ?>assets/lead/front_assets/assets/js/jquery-ui.min.js"></script>
<script src="<?php echo base_url(); ?>assets/lead/front_assets/assets/js/main.js"></script>
<script src="<?php echo base_url(); ?>assets/lead/front_assets/assets/js/index.js"></script>
<script src="<?php echo base_url(); ?>assets/lead/front_assets/assets/js/main-email.js"></script>
<script src="<?php echo base_url(); ?>assets/lead/front_assets/assets/js/bootstrap-select.min.js"></script>
<script src="<?php echo base_url(); ?>assets/lead/front_assets/assets/js/jquery.dataTables.min.js"></script>
<script src="<?php echo base_url(); ?>assets/lead/front_assets/assets/js/bootstrap-datepicker.min.js"></script>
<script src="<?php echo base_url(); ?>assets/lead/front_assets/assets/js/bootstrap.bundle.min.js"></script>
<script src="<?php echo base_url(); ?>assets/lead/front_assets/assets/js/boxicons.js"></script>
<script src="<?php echo base_url(); ?>assets/lead/front_assets/ckeditor/ckeditor.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script> -->
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.9/summernote-bs4.js"></script> -->
<script>
$(document).ready(function() {
    $('.reminder-btn').click(function() {
        $('.reminder-show').show('slow');
    });
    $('.left-icon').click(function() {
        $('.reminder-show').hide('slow');
    });
    $('#temp-modal').click(function() {
        $('.padding').show('slow');
        $(this).hide();
        $('#button_1').hide('slow');
    });
    $('#chat-close').click(function() {
       $('#frame').hide('slow');
    });
    $('.btn-close').click(function() {
        $('.padding ').hide('slow');
        $('#temp-modal').show('slow');
        $('#button_1').show('slow');
    });
    $('.window-closed').click(function() {
        $('#mailpanel').css({
            'transform': 'translate(0, 900px)',
            'transition': '1s',
        });
        $('.notiy').css({
            'display': 'block'
        });
        $('.modal-backdrop').css({
            'display': 'none'
        });
        $(this).parents('.modal').fadeOut(1000);
    });

        $('.createTemplateBtn').click(function() {
        $('#tempmodal').removeClass('d-none');
        $('#tempmodal').show('slow');
        
    });
    $('.btn-close').click(function() {
        $('#tempmodal').hide('slow');
        
    
    $('.cancel-btn').click(function() {
        $('#tempmodal').hide('slow');
    });
    

    });
    $('.notiy').click(function() {
        $('#mailpanel').css({
            'transform': 'translate(0, 0px)'
        });
        $(this).css({
            'display': 'none'
        });
        $('.modal-backdrop').css({
            'display': 'block'
        });
        $('#staticBackdrop').fadeIn(1000);
        
    })
    $(".icon").click(function() {
        $('.container-chat').toggle('slow');
    });
    $("#show-mail").click(function(){ 
    $(".mailpanel").show('slow');
});
$("#btn-closed").click(function(){
    $(".mailpanel").hide('slow');
});
});
</script>
<script>
ClassicEditor
    .create(document.querySelector('#editor'))
    .catch(error => {
        console.error(error);
    });
</script>

<script>
// start admin message send 
function adminMessage(chat_id) {
    let chat_with_id=chat_id;
    $('#reciever_id').val(chat_with_id);
    let sender_id=$('#sender_id').val();
    let reciever_id=$('#reciever_id').val();
    $.ajax({
        url: "<?php echo base_url();?>Message/adminMessage",
        type: "POST",
        // sending data
        data: {
            click_id: reciever_id,
            current_id: sender_id,
        },
        // response text
        success: function(data) {

            var arr = $.parseJSON(data);
            var user_id = sender_id;
            // console.log(arr[0]);
            var html = [];
            var name = arr[1][0].name;
            var id = arr[1][0].id;



            $.each(arr[0], function(key, value) {
                var data_id = key + 1;
                // alert(user_id);
                if (value.senderid == user_id) {
                    html += '<li class="replies">' +
                        '<img src="http://emilcarlsson.se/assets/mikeross.png" alt="" />' + '<p>' +
                        value.message + '</p>' +
                        '</li>';
                } else {
                    html += '<li class="sent">' +
                        '<img src="http://emilcarlsson.se/assets/louislitt.png" alt="" />' + '<p>' +
                        value.message + '</p>' +
                        '</li>';
                }
                $(".messages").stop().animate({
                    scrollTop: $(".messages")[0].scrollHeight
                }, 1000);
            });
            $('.sent_message_admin').html(html);
            $('.profileuser').html(name);
            // $('#reciever_id').val(reciever_id);
            // $('#sender_id').val(sender_id);
        }
    });

};

function getMessage(reciever_id,sender_id) {
    console.log('s_id'+sender_id);
    console.log('r_id'+reciever_id);
    $.ajax({
        url: "<?php echo base_url();?>Message/adminMessage",
        type: "POST",
        // sending data
        data: {
            click_id: reciever_id,
            current_id: sender_id,
        },
        // response text
        
        success: function(data) {

            var arr = $.parseJSON(data);
            var user_id = sender_id;
            // console.log(arr[0]);
            var html = [];
            var name = arr[1][0].name;
            var id = arr[1][0].id;
            $.each(arr[0], function(key, value) {
                var data_id = key + 1;
                // alert(user_id);
                if (value.senderid == user_id) {
                    html += '<li class="replies">' +
                        '<img src="http://emilcarlsson.se/assets/mikeross.png" alt="" />' + '<p>' +
                        value.message + '</p>' +
                        '</li>';
                } else {
                    html += '<li class="sent">' +
                        '<img src="http://emilcarlsson.se/assets/louislitt.png" alt="" />' + '<p>' +
                        value.message + '</p>' +
                        '</li>';
                }
                $(".messages").stop().animate({
                    scrollTop: $(".messages")[0].scrollHeight
                }, 1000);
            });
            $('.sent_message_admin').html(html);
            // $('.profileuser').html(name);
            // $('#reciever_id_hidden').val(id);
            // $('.reciever_id').val(id);
        }
    });

};


$('#sendMessageUser').submit('click', function() {

    var sender_id = $('#sender_id').val();
    var reciever_id = $('#reciever_id').val();
    var send_message_user = $('#send_message_user').val();
    $.ajax({
        type: "POST",
        url: "<?php echo base_url();?>Message/sendMessageUser",
        data: {
            sender_id: sender_id,
            reciever_id: reciever_id,
            send_message_user: send_message_user,
        },
        success: function(data) {
            var arr = $.parseJSON(data);
            console.log(arr[2]);
            let r_id = arr[2];
            let s_id = arr[1];
            // var id = arr[1];
            // var secondid = arr[2];
            // addBasket(id,secondid)
            let html = '<li class="replies">' +
                '<img src="http://emilcarlsson.se/assets/louislitt.png" alt="" />' + '<p>' +
                arr['message'] + '</p>' +
                '</li>';
            $('.sent_message_admin').append(html);
            $(".messages").stop().animate({
                scrollTop: $(".messages")[0].scrollHeight
            }, 1000);
            document.getElementById("send_message_user").value = " ";
            // get();

        }

    });
    return false;
});
$(".admin-message").hover(function(){
    let sender_id=$('#sender_id').val();
    let reciever_id=$('#reciever_id').val();
    
//   alert(secondid);
//   setInterval(function(){ 
    getMessage(reciever_id,sender_id); 
    // }, 2000);
});
// function get(){
//     alert();
//     let sender_id=$('#sender_id').val();
//     let reciever_id=$('#reciever_id').val();
    
// //   alert(secondid);
// //   setInterval(function(){ 
//     getMessage(reciever_id,sender_id); 
// }

// close admin message send 
</script>
<script>
  function toggle(source) {
    checkboxes = document.getElementsByName('check');
    for (var i = 0, n = checkboxes.length; i < n; i++) {
        checkboxes[i].checked = source.checked;
    }
  }
  $(function() {
  $(".custom-checkbox").on("click",function() {
    $("#checkon").show();
  
  });

});
  $("#delete-template").on("click",function() {
    $(".delete-tempalte").show();
  
  });
  $("#ccn-btn").on("click",function() {
    $(".delete-tempalte").hide();
  
  });


  $(function() {
  $("#delete-div").on("click",function() {
    $(".delete-row").remove();
  
  });
  $("#del-btn").on("click",function() {
    $("#delete-template").remove();
  
  });

});
$('.uncheck').click(function(){
  $('.custom-control-input').prop('checked', false);
  $('#checkon').hide();
})

        $('#success').show(1000, function() {
            setTimeout(function() {
                $('#success').hide(1000, function() {
                    setTimeout(function() {
                       
                    }, 1000);
                });
                $("#error").show(1000);
                setTimeout(function()
                {
                    $("#error").show(1000);
                    setTimeout(() => {
                        
                    }, 1000);
                })
            }, 1000);
        });
   
</script>

<script>
    $( document ).ready(function() {
    
    var checkboxes = $("input[type='checkbox']"),
    actions = $("#actions");
    
    checkboxes.click(function() {
    
       actions.attr("hidden", !checkboxes.is(":checked" ));
      
    });
  });
</script>
<script>
   function record(){
    var recognition = new webkitSpeechRecognition();
    recognition.lang = "en-GB";
    recognition.onresult= function(event){
        document.getElementById("speakToText").value = event.results[0][0].transcript;
    }
    recognition.start();
   }

</script>
<script>
    $(document).ready(function() {
        $(".search-chat").on("keyup", function() {
            var value = $(this).val().toLowerCase();
            $("#contacts ul li").filter(function() {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });
    });
</script>


<!-- toaster bootstrap  -->
<script src="<?php echo base_url();?>assets/js/toast.js"></script>                   
    <script>
      $( document ).ready(function() {
        // $.toast({
        //     type: 'info',
        //     title: 'Notice!',
        //     content: 'Hello, world! This is a toast message.',
        //     delay: 5000,
        // });
        <?php if ($_SESSION['done']) { ?>
          $.toast({
              type: 'success',
              title: 'Success',
              content: '<?php echo $_SESSION['done'] ; ?>',
              delay: 50000,
          });
        
        <?php unset($_SESSION['done']); } ?>  
        <?php if ($_SESSION['error']) { ?>
        $.toast({
            type: 'error',
            title: 'Error',
            content: '<?php echo $_SESSION['error'] ; ?>',
            delay: 50000,
        });
        <?php unset($_SESSION['error']); } ?>  
        // $.toast({
        //     type: 'warning',
        //     title: 'Success',
        //     content: 'Hello, world! This is a toast message.',
        //     delay: 5000,
        // });

        // $.toast({
        //     type: 'toast',
        //     title: 'Success',
        //     content: 'Hello, world! This is a toast message.',
        //     delay: 5000,
        // });

      });
    </script>
</body>

</html>